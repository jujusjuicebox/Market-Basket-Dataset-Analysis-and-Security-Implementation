package Project;
 

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.util.List;

public class MainTest2_Eval {

    public static void main(String[] args) {
        String inputFile = "Retail_Transaction_Dataset.txt";
        String mainTestOutputFile = "MainTest1_Output.txt";
        String evalFileName = "Eval_Output.txt";

        
		List<FileContent> originalTransactions = ReadFile.readData(inputFile);

		//reading the private transactions from output file generated by MainTest1
		List<FileContent> privateTransactions = ReadFile.readData(mainTestOutputFile);

		//k-anonymity
		boolean kAnonymitySatisfied = KAnonymityChecker.checkKAnonymity(privateTransactions, 3); 

		//l-diversity
		boolean lDiversitySatisfied = LDiversityChecker.checkLDiversity(privateTransactions, 2); 

		evaluateNoise(originalTransactions, privateTransactions, evalFileName, kAnonymitySatisfied, lDiversitySatisfied);

		System.out.println("Evaluation completed successfully. Check " + evalFileName + " for results.");
    }

    private static void evaluateNoise(List<FileContent> originalTransactions, List<FileContent> privateTransactions, String evalFileName,
            boolean kAnonymitySatisfied, boolean lDiversitySatisfied) {
				try (BufferedWriter writer = new BufferedWriter(new FileWriter(evalFileName))) {
				//k-anonymity evaluation result
				writer.write("k-Anonymity (k=3): " + (kAnonymitySatisfied ? "Satisfied" : "Not Satisfied"));
				writer.newLine();
				
				//l-diversity evaluation result
				writer.write("l-Diversity (l=2): " + (lDiversitySatisfied ? "Satisfied" : "Not Satisfied"));
				writer.newLine();
				
		
			
		} catch (IOException e) {
			System.err.println("Error writing evaluation to file: " + e.getMessage());
	}

    }
}
